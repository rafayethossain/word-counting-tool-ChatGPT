// Minified JavaScript for Word Counting Tool
// (Minified using https://javascript-minifier.com/)
document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#text-area"),t=document.querySelector("#word-count"),n=document.querySelector("#character-count"),a=document.querySelector("#character-count-without-spaces"),o=document.querySelector("#top-keywords-list"),r=document.querySelector("#clear-btn"),d=document.getElementById("file-upload"),c=document.getElementById("download-btn");let i;const l=(e,t=120)=>(...n)=>{clearTimeout(i),i=setTimeout(()=>e(...n),t)},s=e=>e.trim().split(/\s+/).filter(e=>e.length>0).length,u=e=>e.length,m=e=>e.replace(/\s/g,"").length,f=new Set(["the","and","a","to","of","in","is","it","for","on","with","as","at","by","an","be","this","that","from","or","are","was","but","not","have","has","had","they","you","we","he","she","his","her","their","our","my","your","so","if","can","will","just"]),y=(e,t=5)=>{const n=e.toLowerCase().match(/\b\w+\b/g)||[],a={};return n.forEach(e=>{f.has(e)||(a[e]=(a[e]||0)+1)}),Object.entries(a).sort((e,t)=>t[1]-e[1]).slice(0,t)};e.placeholder="Paste or type your text here...";const g="empty-message",h=()=>{let t=document.getElementById(g);t||(t=document.createElement("div"),t.id=g,t.textContent="Start typing or paste your text above to see word and character counts.",t.style.cssText="color:#888;margin:18px 0 0 0;font-size:1.08em;",e.parentNode.appendChild(t))},p=()=>{const e=document.getElementById(g);e&&e.remove()},v=e=>{e.classList.add("animated"),setTimeout(()=>e.classList.remove("animated"),250)},b=()=>{const r=e.value,d=t.textContent,c=n.textContent,i=a.textContent,l=s(r),f=u(r),g=m(r);d!=l&&v(t),c!=f&&v(n),i!=g&&v(a),t.textContent=l,n.textContent=f,a.textContent=g;const b=y(r);o.innerHTML=b.length?b.map(([e,t])=>`<span>${e} (${t})</span>`).join(""):'<span style="color:#aaa">None</span>',r.trim()?p():h()};e.addEventListener("input",l(b,100)),r.addEventListener("click",()=>{e.value="",b(),e.focus()}),d.addEventListener("change",t=>{const n=t.target.files[0];if(n&&("text/plain"===n.type||n.name.endsWith(".txt"))){const a=new FileReader;a.onload=t=>{e.value=t.target.result,b()},a.onerror=()=>{alert("Error reading file. Please try again.")},a.readAsText(n)}else alert("Please upload a valid .txt file.");t.target.value=null}),c.addEventListener("click",()=>{const t=e.value;if(!t.trim())return void alert("Nothing to download. Please enter some text.");const n=new Blob([t],{type:"text/plain"}),a=URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.download="word-count-text.txt",document.body.appendChild(o),o.click(),setTimeout(()=>{document.body.removeChild(o),URL.revokeObjectURL(a)},0)});const w=(e,t)=>{const n=document.querySelector(e);n&&(n.style.position="relative",n.title=t)};w("#word-count","Total number of words"),w("#character-count","Total number of characters including spaces"),w("#character-count-without-spaces","Total number of characters excluding spaces"),w("#top-keywords-title","Most frequent non-common words"),b()});
